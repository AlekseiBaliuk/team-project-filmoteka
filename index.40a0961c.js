!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},r={},o=t.parcelRequire6149;null==o&&((o=function(e){if(e in n)return n[e].exports;if(e in r){var t=r[e];delete r[e];var o={id:e,exports:{}};return n[e]=o,t.call(o.exports,o,o.exports),o.exports}var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){r[e]=t},t.parcelRequire6149=o);var a=o("bpxeT"),i=(o("dDDEV"),o("2TvXO")),s=o("lbRHt"),c=o("aTzrc");function u(e){return{totalItems:e,itemsPerPage:20,visiblePages:3,centerAlign:!0,firstItemClassName:"pagination-first-child",lastItemClassName:"pagination-last-child",usageStatistics:!0}}var l=o("g2YN6"),d=o("6fJbC"),f=o("1VFfL");o("2xDiJ");var m=document.querySelector(".movies"),p=document.querySelector(".hero-home__form"),v=document.querySelector(".fail-search"),g=new(0,d.localStorageAPI);function h(){return(h=e(a)(e(i).mark((function t(n){var r,o,a,s,c,u;return e(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.target.closest("li").dataset.id,"UL"!==n.target.nodeName){e.next=3;break}return e.abrupt("return");case 3:o=g.getData("movies"),a=g.getData("genresList"),s=o.filter((function(e){return e.id===Number(r)}))[0],(c=s.genre_ids)&&(u=a.filter((function(e){var t=e.id;return c.includes(t)})).map((function(e){return e.name}))),s.genres=u,g.setData("current-film",s),(0,l.modalBasicLightbox)(s,"movies"),g.addListenersToBtns();case 13:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function b(){return(b=e(a)(e(i).mark((function t(n){var r;return e(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),""!==(r=p.elements.searchQuery.value.trim())){e.next=4;break}return e.abrupt("return",console.log("Empty search query"));case 4:return w(r),p.reset(),e.abrupt("return");case 7:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function w(e){return y.apply(this,arguments)}function y(){return(y=e(a)(e(i).mark((function t(n){return e(i).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,s.fetchMoviesByName)(n);case 2:L(e.sent,n);case 4:case"end":return e.stop()}}),t)})))).apply(this,arguments)}function L(t,n){if(0===t.results.length)return v.classList.remove("is-hidden"),setTimeout((function(){return v.classList.add("is-hidden")}),5e3),void p.reset();m.innerHTML=(0,c.createMovieCards)(t.results),new(e(f))("pagination",u(t.total_results)).on("afterMove",(function(e){var t=e.page;(0,s.fetchMoviesByName)(n,t).then((function(e){m.innerHTML=(0,c.createMovieCards)(e.results),window.scrollTo({top:0,behavior:"smooth"})})).catch((function(e){console.log(e)}))}))}m.addEventListener("click",(function(e){return h.apply(this,arguments)})),p.addEventListener("submit",(function(e){return b.apply(this,arguments)})),o("8uW00");var T,S=o("6Urw1"),M=o("6Nu6u"),x=o("3SEMc"),E=o("8uW00"),k=(0,S.initializeApp)({apiKey:"AIzaSyCI5JTbKtHIHNuS4WcbgMfz2S8WxJp_ehM",authDomain:"filmoteka-proj-7.firebaseapp.com",databaseURL:"https://filmoteka-proj-7-default-rtdb.europe-west1.firebasedatabase.app/",projectId:"filmoteka-proj-7",storageBucket:"filmoteka-proj-7.appspot.com",messagingSenderId:"181528100082",appId:"1:181528100082:web:031dd9add36023a4e5e46b",measurementId:"G-1X27T2N03L"}),D=((0,M.getDatabase)(k),(0,x.getAuth)()),I=document.querySelector(".logout"),N=document.querySelector(".welcome"),q=document.querySelector(".login");(0,x.onAuthStateChanged)(D,(function(e){e&&(e.uid,T=e.email,I.classList.remove("visually-hidden"),q.classList.add("visually-hidden"),console.log("current user = ",T),N.innerHTML="Welcome, ".concat(T,"!"))})),E.registrationFormSubmit.addEventListener("click",(function(e){e.preventDefault();var t=E.registrationFormEmail.value;console.log(t);var n=E.registrationFormPassword.value;console.log(n),(0,x.createUserWithEmailAndPassword)(D,t,n).then((function(e){e.user})).catch((function(e){var t=e.code,n=e.message;console.log(t),console.log(n)})),E.registrationForm.reset(),(0,E.closeOnSubmit)()})),E.loginForm.addEventListener("submit",(function(e){e.preventDefault(),localStorage.removeItem("watched"),localStorage.removeItem("queue");var t=E.loginFormEmail.value,n=E.loginFormPassword.value;(0,x.signInWithEmailAndPassword)(D,t,n).then((function(e){e.user;window.location.reload()})).catch((function(e){e.code,e.message})),E.loginForm.reset(),(0,E.closeOnSubmit)()})),I.addEventListener("click",(function(){(0,x.signOut)(D).then((function(){T=null,I.classList.add("visually-hidden"),q.classList.remove("visually-hidden"),localStorage.clear()})).catch((function(e){})),window.location.reload()}));a=o("bpxeT"),i=o("2TvXO"),s=o("lbRHt"),c=o("aTzrc"),f=o("1VFfL");var F=document.querySelector(".movies");function C(){return(C=e(a)(e(i).mark((function t(){var n;return e(i).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,s.fetchTrendingMovies)();case 2:n=t.sent,F.innerHTML=(0,c.createMovieCards)(n.results),new(e(f))("pagination",u(n.total_results)).on("afterMove",(function(e){var t=e.page;(0,s.fetchTrendingMovies)(t).then((function(e){F.innerHTML=(0,c.createMovieCards)(e.results),window.scrollTo({top:0,behavior:"smooth"})}))}));case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){C.apply(this,arguments)}(),o("4smAb"),o("j1lrD"),o("4Hwvb"),o("dsadE")}();
//# sourceMappingURL=index.40a0961c.js.map
