function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},o={},a={},n=t.parcelRequire6149;null==n&&((n=function(e){if(e in o)return o[e].exports;if(e in a){var t=a[e];delete a[e];var n={id:e,exports:{}};return o[e]=n,t.call(n.exports,n,n.exports),n.exports}var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(e,t){a[e]=t},t.parcelRequire6149=n);var s=n("cqGDw"),r=n("2ySY5");function i(e,t=0){return{totalItems:e,itemsPerPage:20,visiblePages:3,centerAlign:!0,firstItemClassName:"pagination-first-child",lastItemClassName:"pagination-last-child",usageStatistics:!0}}var l=n("dARph"),c=n("kLGAr"),d=n("fb9GJ");n("ffjl9");const u=document.querySelector(".movies"),m=document.querySelector(".hero-home__form"),g=document.querySelector(".fail-search"),f=new(0,c.localStorageAPI);function v(t,o){if(0===t.results.length)return g.classList.remove("is-hidden"),setTimeout((()=>g.classList.add("is-hidden")),5e3),void m.reset();u.innerHTML=(0,r.createMovieCards)(t.results);new(e(d))("pagination",i(t.total_results)).on("afterMove",(({page:e})=>{(0,s.fetchMoviesByName)(o,e).then((e=>{u.innerHTML=(0,r.createMovieCards)(e.results),window.scrollTo({top:0,behavior:"smooth"})})).catch((e=>{console.log(e)}))}))}u.addEventListener("click",(async function(e){const t=e.target.closest("li").dataset.id;if("UL"===e.target.nodeName)return;const o=f.getData("movies"),a=f.getData("genresList"),n=o.filter((({id:e})=>e===Number(t)))[0],{genre_ids:s}=n;let r;s&&(r=a.filter((({id:e})=>s.includes(e))).map((({name:e})=>e)));n.genres=r,f.setData("current-film",n),(0,l.modalBasicLightbox)(n,"movies"),f.addListenersToBtns()})),m.addEventListener("submit",(async function(e){e.preventDefault();const t=m.elements.searchQuery.value.trim();return""===t?console.log("Empty search query"):(async function(e){v(await(0,s.fetchMoviesByName)(e),e)}(t),void m.reset())})),n("6pjkE");var p=n("25RCP"),h=n("fQ3Fn"),w=n("amyG6"),y=n("6pjkE");const b=(0,p.initializeApp)({apiKey:"AIzaSyCI5JTbKtHIHNuS4WcbgMfz2S8WxJp_ehM",authDomain:"filmoteka-proj-7.firebaseapp.com",databaseURL:"https://filmoteka-proj-7-default-rtdb.europe-west1.firebasedatabase.app/",projectId:"filmoteka-proj-7",storageBucket:"filmoteka-proj-7.appspot.com",messagingSenderId:"181528100082",appId:"1:181528100082:web:031dd9add36023a4e5e46b",measurementId:"G-1X27T2N03L"}),L=((0,h.getDatabase)(b),(0,w.getAuth)()),S=document.querySelector(".logout");let M,T;const I=document.querySelector(".welcome"),E=document.querySelector(".login");(0,w.onAuthStateChanged)(L,(e=>{e&&(M=e.uid,T=e.email,S.classList.remove("visually-hidden"),E.classList.add("visually-hidden"),console.log("current user = ",T),I.innerHTML=`Welcome, ${T}!`)})),y.registrationFormSubmit.addEventListener("click",(function(e){e.preventDefault();const t=y.registrationFormEmail.value;console.log(t);const o=y.registrationFormPassword.value;console.log(o),(0,w.createUserWithEmailAndPassword)(L,t,o).then((e=>{e.user})).catch((e=>{const t=e.code,o=e.message;console.log(t),console.log(o)})),y.registrationForm.reset(),(0,y.closeOnSubmit)()})),y.loginForm.addEventListener("submit",(function(e){e.preventDefault(),localStorage.removeItem("watched"),localStorage.removeItem("queue");const t=y.loginFormEmail.value,o=y.loginFormPassword.value;(0,w.signInWithEmailAndPassword)(L,t,o).then((e=>{e.user;window.location.reload()})).catch((e=>{e.code,e.message})),y.loginForm.reset(),(0,y.closeOnSubmit)()})),S.addEventListener("click",(function(){(0,w.signOut)(L).then((()=>{T=null,S.classList.add("visually-hidden"),E.classList.remove("visually-hidden"),localStorage.clear()})).catch((e=>{})),window.location.reload()}));s=n("cqGDw"),r=n("2ySY5"),d=n("fb9GJ");const q=document.querySelector(".movies");!async function(){const t=await(0,s.fetchTrendingMovies)();q.innerHTML=(0,r.createMovieCards)(t.results),new(e(d))("pagination",i(t.total_results)).on("afterMove",(({page:e})=>{(0,s.fetchTrendingMovies)(e).then((e=>{q.innerHTML=(0,r.createMovieCards)(e.results),window.scrollTo({top:0,behavior:"smooth"})}))}))}(),n("ioBS9"),n("04jNI"),n("82jod"),n("1VOaQ");
//# sourceMappingURL=index.be2c5ef3.js.map
